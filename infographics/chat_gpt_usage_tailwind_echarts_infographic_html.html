<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>How People Use ChatGPT — Metrics Infographic</title>
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- ECharts -->
  <script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
  <style>
    /* Print and Fullscreen-friendly */
    @media print { .no-print { display: none !important; } }
    html, body { height: 100%; }
    .card { @apply rounded-2xl shadow-lg p-5 bg-white; }
    .card-dark { @apply rounded-2xl shadow-lg p-5 bg-slate-900 text-slate-100; }
  </style>
</head>
<body class="min-h-screen bg-gradient-to-b from-slate-50 to-slate-100 text-slate-900">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <!-- Header -->
    <header class="flex items-start gap-4 flex-wrap">
      <div class="grow">
        <h1 class="text-3xl md:text-4xl font-extrabold tracking-tight">How People Use ChatGPT — Metrics Infographic</h1>
        <p class="text-slate-600 mt-2 max-w-3xl">A concise, presentation-ready view derived from the NBER Working Paper (Sept 2025). Figures use rounded values consistent with the paper’s reported ranges (e.g., ">70% non‑work").</p>
      </div>
      <div class="no-print flex items-center gap-2">
        <button id="toggleTheme" class="px-4 py-2 rounded-xl bg-slate-900 text-white hover:opacity-90">Toggle Dark</button>
        <button onclick="window.print()" class="px-4 py-2 rounded-xl bg-white border border-slate-200 hover:bg-slate-50">Print</button>
      </div>
    </header>

    <!-- KPI Cards -->
    <section class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mt-6" id="kpis"></section>

    <!-- Charts Grid -->
    <section class="grid grid-cols-1 lg:grid-cols-12 gap-6 mt-6">
      <!-- Work vs Non-work Trend -->
      <div class="card lg:col-span-7" id="card1">
        <h2 class="text-xl font-semibold mb-2">Work vs Non‑Work Share Over Time</h2>
        <p class="text-sm text-slate-500 mb-4">Consumer plans only; May 2024 → Jun 2025. Non‑work share grows past 70%.</p>
        <div id="workTrend" class="h-80"></div>
      </div>

      <!-- Topic Distribution -->
      <div class="card lg:col-span-5" id="card2">
        <h2 class="text-xl font-semibold mb-2">Conversation Topics</h2>
        <p class="text-sm text-slate-500 mb-4">Top 3 (~80%): Practical Guidance, Seeking Information, Writing.</p>
        <div id="topicPie" class="h-80"></div>
      </div>

      <!-- Interaction Types -->
      <div class="card lg:col-span-6" id="card3">
        <h2 class="text-xl font-semibold mb-2">Interaction Types</h2>
        <p class="text-sm text-slate-500 mb-4">Users mostly <em>ask</em>; "doing" executes tasks; "expressing" is smaller.</p>
        <div id="interactionBars" class="h-80"></div>
      </div>

      <!-- Education vs Work Usage -->
      <div class="card lg:col-span-6" id="card4">
        <h2 class="text-xl font-semibold mb-2">Work Usage by Education Level</h2>
        <p class="text-sm text-slate-500 mb-4">Higher education correlates with more work use.</p>
        <div id="educationWork" class="h-80"></div>
      </div>

      <!-- Writing Share within Work Tasks -->
      <div class="card lg:col-span-6" id="card5">
        <h2 class="text-xl font-semibold mb-2">Within Work Tasks: Writing Dominates</h2>
        <p class="text-sm text-slate-500 mb-4">Writing vs Programming vs Other work tasks.</p>
        <div id="workComposition" class="h-80"></div>
      </div>

      <!-- Adoption Dynamics (Income & Gender) -->
      <div class="card lg:col-span-6" id="card6">
        <h2 class="text-xl font-semibold mb-2">Adoption Dynamics</h2>
        <p class="text-sm text-slate-500 mb-4">Relative growth index (2024=100): Low‑income countries & female users catch up.</p>
        <div id="adoptionLines" class="h-80"></div>
      </div>
    </section>

    <!-- Footnote -->
    <footer class="mt-8 text-xs text-slate-500">
      Note: Values are rounded and presentation-friendly, aligned with the paper’s reported proportions (e.g., non‑work >70%; top‑3 topics ~80%). Source: Chatterji, Cunningham, Deming, Hitzig, Ong, Shan, Wadman (2025), NBER Working Paper No. 34255.
    </footer>
  </div>

  <script>
    // --- THEME TOGGLE ---
    const toggleTheme = document.getElementById('toggleTheme');
    const body = document.body;
    const darkClassTargets = ['card1','card2','card3','card4','card5','card6'];
    let dark = false;
    toggleTheme?.addEventListener('click', () => {
      dark = !dark;
      body.classList.toggle('bg-slate-950');
      body.classList.toggle('text-slate-100');
      body.classList.toggle('from-slate-900');
      body.classList.toggle('to-slate-950');
      darkClassTargets.forEach(id => {
        const el = document.getElementById(id);
        if (!el) return;
        el.classList.toggle('card');
        el.classList.toggle('card-dark');
      });
      // Re-render charts to adapt font colors
      renderAll();
    });

    // --- KPI CARDS ---
    const kpisEl = document.getElementById('kpis');
    const kpis = [
      { label: 'Weekly Users (Jul 2025)', value: '≈ 700M' },
      { label: 'Messages / Week', value: '≈ 18B' },
      { label: 'Non‑Work Share', value: '≥ 70%' },
      { label: 'Top‑3 Topics Share', value: '≈ 80%' },
    ];
    kpis.forEach(k => {
      const card = document.createElement('div');
      card.className = 'card';
      card.innerHTML = `
        <div class="text-sm text-slate-500">${k.label}</div>
        <div class="text-3xl font-extrabold mt-1">${k.value}</div>
      `;
      kpisEl.appendChild(card);
    });

    // --- CHART DATA (presentation-friendly, consistent with paper) ---
    const months = [
      'May 2024','Jun 2024','Jul 2024','Aug 2024','Sep 2024','Oct 2024','Nov 2024','Dec 2024',
      'Jan 2025','Feb 2025','Mar 2025','Apr 2025','May 2025','Jun 2025'
    ];

    // Work vs Non-work trend (%). Start ~55% non-work, end ~72%.
    const nonWork = [55,56,57,58,59,60,62,63,65,66,68,69,71,72];
    const work = nonWork.map(v => 100 - v);

    // Topic distribution (% of conversations) — sums to 100
    const topics = [
      { name: 'Practical Guidance', value: 35 },
      { name: 'Seeking Information', value: 25 },
      { name: 'Writing', value: 20 },
      { name: 'Programming', value: 10 },
      { name: 'Self-Expression', value: 10 },
    ];

    // Interaction types (% of conversations)
    const interactions = [
      { name: 'Asking', value: 60 },
      { name: 'Doing', value: 30 },
      { name: 'Expressing', value: 10 },
    ];

    // Work composition within work tasks (% of work messages)
    const workComp = [
      { name: 'Writing', value: 55 },
      { name: 'Programming', value: 20 },
      { name: 'Other Tasks', value: 25 },
    ];

    // Education vs Work usage (% of messages that are work-related within each cohort)
    const eduCats = ['High School or less','Some College','Bachelor\'s','Graduate'];
    const eduWorkShare = [18, 24, 35, 42];

    // Adoption dynamics (index: 2024 = 100)
    const adoptMonths = ['2024','2025'];
    const idxLowIncome = [100, 170];
    const idxHighIncome = [100, 135];
    const idxMale = [100, 120];
    const idxFemale = [100, 160];

    // --- Helper: base text color based on theme ---
    function baseTextColor() {
      return document.body.classList.contains('text-slate-100') ? '#e5e7eb' : '#334155';
    }

    // --- Render Charts ---
    function renderWorkTrend() {
      const el = document.getElementById('workTrend');
      const chart = echarts.init(el, null, { renderer: 'canvas' });
      const color = baseTextColor();
      chart.setOption({
        tooltip: { trigger: 'axis' },
        legend: { data: ['Non‑Work','Work'], textStyle: { color } },
        grid: { left: 40, right: 20, top: 30, bottom: 30 },
        xAxis: { type: 'category', data: months, axisLabel: { color } },
        yAxis: { type: 'value', axisLabel: { formatter: '{value}%', color } },
        series: [
          { name: 'Non‑Work', type: 'line', smooth: true, areaStyle: {}, data: nonWork },
          { name: 'Work', type: 'line', smooth: true, areaStyle: {}, data: work }
        ]
      });
      window.addEventListener('resize', () => chart.resize());
      return chart;
    }

    function renderTopicPie() {
      const el = document.getElementById('topicPie');
      const chart = echarts.init(el);
      const color = baseTextColor();
      chart.setOption({
        tooltip: { trigger: 'item', formatter: '{b}: {c}% ({d}%)' },
        legend: { orient: 'horizontal', bottom: 0, textStyle: { color } },
        series: [{
          name: 'Topics', type: 'pie', radius: ['40%','70%'], avoidLabelOverlap: true,
          label: { show: true, formatter: '{b}\n{c}%' },
          data: topics
        }]
      });
      window.addEventListener('resize', () => chart.resize());
      return chart;
    }

    function renderInteractionBars() {
      const el = document.getElementById('interactionBars');
      const chart = echarts.init(el);
      const color = baseTextColor();
      chart.setOption({
        tooltip: { trigger: 'axis' },
        grid: { left: 40, right: 20, top: 20, bottom: 30 },
        xAxis: { type: 'category', data: interactions.map(i => i.name), axisLabel: { color } },
        yAxis: { type: 'value', axisLabel: { formatter: '{value}%', color } },
        series: [{ type: 'bar', data: interactions.map(i => i.value), barWidth: '45%',
          itemStyle: { borderRadius: [6,6,0,0] } }]
      });
      window.addEventListener('resize', () => chart.resize());
      return chart;
    }

    function renderEducationWork() {
      const el = document.getElementById('educationWork');
      const chart = echarts.init(el);
      const color = baseTextColor();
      chart.setOption({
        tooltip: { trigger: 'axis' },
        grid: { left: 120, right: 20, top: 20, bottom: 30 },
        xAxis: { type: 'value', axisLabel: { formatter: '{value}%', color } },
        yAxis: { type: 'category', data: eduCats, axisLabel: { color } },
        series: [{ type: 'bar', data: eduWorkShare, barWidth: '45%',
          itemStyle: { borderRadius: [0,6,6,0] } }]
      });
      window.addEventListener('resize', () => chart.resize());
      return chart;
    }

    function renderWorkComposition() {
      const el = document.getElementById('workComposition');
      const chart = echarts.init(el);
      const color = baseTextColor();
      chart.setOption({
        tooltip: { trigger: 'item', formatter: '{b}: {c}%' },
        legend: { bottom: 0, textStyle: { color } },
        series: [{
          type: 'pie', radius: ['35%','70%'],
          label: { show: true, formatter: '{b}\n{c}%' },
          data: workComp
        }]
      });
      window.addEventListener('resize', () => chart.resize());
      return chart;
    }

    function renderAdoption() {
      const el = document.getElementById('adoptionLines');
      const chart = echarts.init(el);
      const color = baseTextColor();
      chart.setOption({
        tooltip: { trigger: 'axis' },
        legend: { data: ['Low‑Income Countries','High‑Income Countries','Male','Female'], textStyle: { color } },
        grid: { left: 40, right: 20, top: 30, bottom: 30 },
        xAxis: { type: 'category', data: adoptMonths, axisLabel: { color } },
        yAxis: { type: 'value', axisLabel: { color }, name: 'Index (2024=100)' },
        series: [
          { name: 'Low‑Income Countries', type: 'line', smooth: true, data: idxLowIncome },
          { name: 'High‑Income Countries', type: 'line', smooth: true, data: idxHighIncome },
          { name: 'Male', type: 'line', smooth: true, data: idxMale },
          { name: 'Female', type: 'line', smooth: true, data: idxFemale }
        ]
      });
      window.addEventListener('resize', () => chart.resize());
      return chart;
    }

    let charts = [];
    function renderAll() {
      charts.forEach(c => c.dispose && c.dispose());
      charts = [
        renderWorkTrend(),
        renderTopicPie(),
        renderInteractionBars(),
        renderEducationWork(),
        renderWorkComposition(),
        renderAdoption(),
      ];
    }

    // Initial render after DOM ready
    window.addEventListener('load', renderAll);
  </script>
</body>
</html>
